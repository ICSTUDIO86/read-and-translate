# XTTS v2 使用指南

## 🎭 情感 AI 朗读 - 最佳英文阅读体验

XTTS v2 是目前集成的最高质量 TTS 引擎，专为需要**情感表达**、**准确断句**、**自然重音**的阅读场景设计。

---

## ✨ 为什么选择 XTTS v2？

### 相比其他 TTS 的优势

| 特性 | Web Speech | Edge TTS | XTTS v2 |
|------|------------|----------|---------|
| 情感表达 | ❌ 机械 | ⭐⭐⭐ 一般 | ⭐⭐⭐⭐⭐ 丰富 |
| 断句准确 | ⭐⭐ 基础 | ⭐⭐⭐⭐ 好 | ⭐⭐⭐⭐⭐ 极佳 |
| 重音自然 | ❌ 平淡 | ⭐⭐⭐ 中等 | ⭐⭐⭐⭐⭐ 智能 |
| 生成速度 | 即时 | 1秒 | 2-4秒 |
| 音质 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 免费 | ✅ | ✅ | ✅ |

### XTTS v2 的特殊能力

1. **情感理解**：
   - 疑问句自动上扬语调
   - 感叹句自动加强情绪
   - 能表达兴奋、平静、疑惑等情感

2. **智能断句**：
   - 逗号 → 短暂停顿
   - 句号 → 明显停顿
   - 问号/感叹号 → 情感化停顿

3. **自然重音**：
   - 自动识别关键词
   - 在重要单词处加强
   - 避免机器人朗读感

---

## 🚀 快速开始

### 步骤1：安装 XTTS 服务器

```bash
cd xtts-server
pip install -r requirements.txt
```

**首次安装会下载模型（~2GB）**，请耐心等待 5-20 分钟（取决于网速）

### 步骤2：启动服务器

```bash
python server.py
```

看到以下信息表示成功：
```
🎙️  XTTS v2 Server Starting...
📍 Server will be available at:
   - Local:   http://localhost:5001
```

### 步骤3：配置应用

1. 打开 **http://localhost:8080**
2. 进入 **Account** 页面（底部导航栏最右侧）
3. 点击 **"Text-to-Speech"** 设置
4. 选择 **TTS Engine**: "XTTS v2 (Best Quality, Emotional, Free)"
5. 点击 **"Test Connection"** 确认连接
6. 选择音色（推荐 Female - Warm & Expressive）
7. 点击 **"Save Settings"**

### 步骤4：开始阅读

1. 打开任意英文书籍
2. 点击播放按钮 ▶️
3. 享受情感丰富的 AI 朗读！

---

## 🎤 音色选择

### Female - Warm & Expressive（推荐）
- **适合**：小说、散文、长时间阅读
- **特点**：温暖、自然、不累耳朵

### Male - Calm & Professional
- **适合**：技术书籍、商业书籍
- **特点**：沉稳、专业、清晰

### Female - Highly Expressive
- **适合**：戏剧化内容、有声读物
- **特点**：情感强烈、富有表现力

### Male - Deep & Authoritative
- **适合**：历史、传记、严肃内容
- **特点**：低沉、权威、有分量

---

## 📱 手机访问设置

### 方法1：WiFi 局域网访问

1. **查找电脑 IP**：
   - Mac: 系统偏好设置 → 网络
   - Windows: `ipconfig`

2. **配置 XTTS**：
   - Server URL: `http://你的电脑IP:5001`

3. **访问应用**：
   - 手机浏览器: `http://你的电脑IP:8080`

---

## ⚡ 性能说明

### 生成速度

- **GPU（推荐）**：2-4 秒/句
- **CPU**：5-15 秒/句

### 优化建议

1. **音频缓存**：
   - 第二次播放相同内容秒开
   - 缓存存储在 IndexedDB

2. **预加载**：
   - 系统自动预加载下一段
   - 连续阅读体验流畅

3. **降级策略**：
   - XTTS 失败 → 自动切换到 Edge TTS
   - Edge TTS 失败 → 自动切换到 Web Speech

---

## 🔧 故障排除

### 服务器连接失败

**症状**：点击 "Test Connection" 显示红色错误

**解决**：
1. 确认 Python 服务器正在运行
2. 检查端口 5001 是否被占用
3. 防火墙允许端口访问

### 首次启动很慢

**原因**：模型下载中（~2GB）

**解决**：等待下载完成，后续启动会很快

### 生成速度慢

**原因**：CPU 推理慢

**解决**：
- 推荐使用 GPU（NVIDIA + CUDA）
- 或降级到 Edge TTS

### 音质不理想

**解决**：
1. 尝试不同音色
2. 调整语速（推荐 1.0x - 1.25x）
3. 确认文本是英文（XTTS 英文效果最佳）

---

## 💡 使用技巧

### 最佳实践

1. **英文内容优先**：
   - XTTS v2 英文表现最佳
   - 中文建议使用 Edge TTS

2. **长文本阅读**：
   - 第一句可能等待 2-4 秒
   - 后续段落会预加载，流畅连续

3. **混合使用**：
   - 重要书籍 → XTTS（最佳体验）
   - 快速浏览 → Web Speech（即时响应）
   - 离线环境 → Web Speech（无需网络）

### 推荐配置

- **小说、文学作品**：XTTS + Female Warm
- **技术书籍**：XTTS + Male Professional 或 Edge TTS
- **快速查阅**：Web Speech

---

## 🆚 三引擎对比

### 什么时候用 XTTS？

✅ 长时间英文阅读
✅ 需要情感表达
✅ 追求最佳音质
✅ 有 GPU 或等待 2-4 秒可接受

### 什么时候用 Edge TTS？

✅ 中文内容
✅ 需要快速响应
✅ 多语言混读
✅ CPU 设备

### 什么时候用 Web Speech？

✅ 离线环境
✅ 即时需求
✅ 低配设备
✅ 快速查阅

---

## 📊 实际效果对比

### 示例文本

> "Hello! How are you doing today? I'm so excited to share this amazing book with you!"

**Web Speech**：
- 平淡朗读，无情感起伏
- 停顿机械
- ⭐⭐

**Edge TTS**：
- 较自然，有基本情感
- 停顿准确
- ⭐⭐⭐⭐

**XTTS v2**：
- "excited" 处明显加强情绪
- "amazing" 处自然重音
- 感叹号停顿富有情感
- ⭐⭐⭐⭐⭐

---

## 🎓 高级功能

### 语音克隆（可选）

XTTS v2 支持使用自定义音色：

1. 准备 5-10 秒的清晰人声录音（WAV）
2. 修改 `xtts-server/server.py`
3. 系统会学习该音色并应用

详见：`xtts-server/README.md`

---

## ❓ 常见问题

**Q: XTTS 支持中文吗？**
A: 支持，但英文效果更好。中文建议使用 Edge TTS。

**Q: 需要付费吗？**
A: 完全免费，无限制使用。

**Q: 手机上能用吗？**
A: 可以，通过 WiFi 连接电脑服务器。

**Q: 离线能用吗？**
A: 缓存后可离线播放，首次需要联网生成。

---

## 📖 总结

XTTS v2 是为**英文长时间阅读**设计的最佳 TTS 方案：

- ✅ 情感丰富，如同真人朗读
- ✅ 断句准确，阅读节奏自然
- ✅ 重音智能，避免机器人感
- ✅ 完全免费，无限制使用

**立即体验，感受 AI 朗读的魅力！**
